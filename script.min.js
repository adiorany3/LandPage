document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const n=e.getAttribute("href");if(n.startsWith("#")){t.preventDefault();const e=document.querySelector(n);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}})});const tBtn=document.getElementById("themeToggle");tBtn.addEventListener("click",()=>{document.body.classList.toggle("dark"),tBtn.textContent=document.body.classList.contains("dark")?"‚òÄÔ∏è":"üåô"});const menuToggle=document.getElementById("menuToggle"),primaryMenu=document.getElementById("primaryMenu");menuToggle&&menuToggle.addEventListener("click",()=>{const e="true"===menuToggle.getAttribute("aria-expanded");menuToggle.setAttribute("aria-expanded",String(!e)),primaryMenu.style.display=e?"":"flex"});const statNumbers=document.querySelectorAll(".stat-number"),statObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=parseInt(e.target.getAttribute("data-target"));animateNumber(e.target,0,t,2e3),statObserver.unobserve(e.target)}})},{threshold:.5});statNumbers.forEach(e=>statObserver.observe(e));const skillCards=document.querySelectorAll(".skill-card"),skillObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.querySelector(".skill-fill");if(t){const e=t.style.width;t.style.width="0",setTimeout(()=>t.style.width=e,100)}skillObserver.unobserve(e.target)}})},{threshold:.5});function animateNumber(e,t,n,r){const a=performance.now(),o=i=>{const s=i-a,c=Math.min(s/r,1),l=Math.floor(t+(n-t)*c);e.textContent=l,c<1&&requestAnimationFrame(o)};requestAnimationFrame(o)}skillCards.forEach(e=>skillObserver.observe(e)),document.querySelectorAll("#primaryMenu a").forEach(e=>{e.addEventListener("click",()=>{primaryMenu&&(primaryMenu.style.display="",menuToggle&&menuToggle.setAttribute("aria-expanded","false"))})});let _cachedRepos=null,_displayCount=6;async function fetchGitHubRepos(e="adiorany3"){try{const t=await fetch(`https://api.github.com/users/${e}/repos?per_page=100&sort=pushed&direction=desc`);if(!t.ok)throw new Error("Gagal mengambil repositori");return(await t.json()).filter(e=>!e.fork)}catch(e){throw console.error("Error fetching GitHub repos:",e),e}}function formatDate(e){return new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})}function getLanguageIcon(e){switch(e){case"Python":return"üêç";case"JavaScript":return"üü®";case"HTML":return"üåê";case"CSS":return"üé®";case"Jupyter Notebook":return"üìì";default:return"üìÅ"}}function renderProjects(e,{onlyPython:t=!0,limit:n=6}={}){const r=document.getElementById("projectsGrid");if(!r)return;let a=e.slice();if(t&&(a=a.filter(e=>"Python"===e.language)),0===a.length)return void(r.innerHTML='<p class="muted">Tidak ada repositori Python publik. Lihat <a href="https://github.com/adiorany3" target="_blank" rel="noopener">profil GitHub</a>.</p>');const o=a.slice(0,n);r.innerHTML="",o.forEach((e,t)=>{const n=document.createElement("article");n.className="project-card fade-in",n.style.animationDelay=.1*t+"s";const a=e.description?e.description:"Tidak ada deskripsi.",o=getLanguageIcon(e.language);let i="";e.topics&&e.topics.length&&(i=e.topics.slice(0,3).map(e=>`<span class="project-tag">${e}</span>`).join("")),n.innerHTML=`\n      <div class="project-header">\n        <div class="project-icon">${o}</div>\n        <h3><a href="${e.html_url}" target="_blank" rel="noopener">${e.name}</a></h3>\n      </div>\n      <p>${a}</p>\n      ${i?`<div class="project-tags">${i}</div>`:""}\n      <div class="project-meta">\n        <span>üõ† ${e.language||"‚Äî"}</span>\n        <span>‚≠ê ${e.stargazers_count}</span>\n        <span>‚óè ${formatDate(e.pushed_at)}</span>\n      </div>\n      <div class="project-links">\n        <a class="btn btn-outline" href="${e.html_url}" target="_blank" rel="noopener">Lihat Repo</a>\n      </div>\n    `,r.appendChild(n)});const i=document.getElementById("loadMore");i&&(i.style.display=a.length>n?"inline-block":"none")}async function loadGitHubProjects(e="adiorany3"){const t=document.getElementById("filterPython"),n=document.getElementById("projectsGrid");if(n){n.innerHTML='<div class="skeleton-card"></div>'.repeat(6);try{_cachedRepos||(_cachedRepos=await fetchGitHubRepos(e));const n=_cachedRepos.filter(e=>"Python"===e.language).length,r=document.getElementById("projectsStat");if(r){const e=r.querySelector(".stat-number");e&&e.setAttribute("data-target",n)}renderProjects(_cachedRepos,{onlyPython:t&&t.checked,limit:_displayCount})}catch(t){n.innerHTML=`<p class="muted">Terjadi kesalahan saat memuat proyek. <a href="https://github.com/${e}" target="_blank" rel="noopener">Lihat GitHub</a>.</p>`,console.error(t)}}}const filterEl=document.getElementById("filterPython"),loadBtn=document.getElementById("loadMore");filterEl&&filterEl.addEventListener("change",()=>{_displayCount=6,loadGitHubProjects()}),loadBtn&&loadBtn.addEventListener("click",()=>{_displayCount+=6,loadGitHubProjects()});const copyBtn=document.getElementById("copyEmail"),emailBtn=document.getElementById("emailBtn");copyBtn&&emailBtn&&(emailBtn.addEventListener("click",()=>{window.location.href="mailto:adioranye@ugm.ac.id"}),copyBtn.addEventListener("click",async()=>{const e="adioranye@ugm.ac.id";try{await navigator.clipboard.writeText(e);const t=copyBtn.textContent;copyBtn.textContent="Tersalin!",copyBtn.disabled=!0,setTimeout(()=>{copyBtn.textContent=t,copyBtn.disabled=!1},1400)}catch(t){window.prompt("Salin alamat email:",e)}}));const greetingBanner=document.getElementById("greetingBanner"),greetingText=document.getElementById("greetingText"),dismissGreeting=document.getElementById("dismissGreeting");function getBrowserName(){const e=navigator.userAgent;return e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Edg")?"Edge":e.includes("Opera")||e.includes("OPR")?"Opera":"Browser tidak dikenal"}function getDeviceType(){const e=navigator.userAgent;return/Mobi|Android/i.test(e)?"Mobile":/Tablet|iPad/i.test(e)?"Tablet":"Desktop"}function getFlagEmoji(e){return e&&"Tidak dapat mendeteksi"!==e?e.toUpperCase().replace(/./g,e=>String.fromCodePoint(e.charCodeAt(0)+127397)):""}async function getUserInfo(){try{const e=await fetch("https://api.ipify.org?format=json");if(!e.ok)throw new Error("Failed to fetch IP");const t=(await e.json()).ip,n=await fetch(`https://ipapi.co/${t}/json/`);if(!n.ok)throw new Error("Failed to fetch country");const r=await n.json(),a=r.country_name||"Tidak dapat mendeteksi",o=getFlagEmoji(r.country_code||""),i=getBrowserName();return{ip:t,country:a,flag:o,browser:i,device:getDeviceType()}}catch(e){console.error("Error fetching user info:",e);return{ip:"Tidak dapat mendeteksi",country:"Tidak dapat mendeteksi",flag:"",browser:getBrowserName(),device:getDeviceType()}}}function getGreetingMessage(e="id"){const t=(new Date).getHours();return"en"===e?t>=5&&t<12?"Good morning":t>=12&&t<18?"Good afternoon":"Good evening":t>=5&&t<12?"Selamat pagi":t>=12&&t<18?"Selamat siang":"Selamat malam"}function greetingDismissedToday(){return localStorage.getItem("greetingDismissDate")===(new Date).toISOString().slice(0,10)}function dismissBanner(){greetingBanner&&(greetingBanner.classList.remove("show"),greetingBanner.setAttribute("aria-hidden","true")),localStorage.setItem("greetingDismissDate",(new Date).toISOString().slice(0,10))}async function showGreeting(){let e="Indonesia",t="";try{const n=await getUserInfo();e=n.country||e,t=n.flag||""}catch(e){}const n="Indonesia"===e?"id":"en",r=getGreetingMessage(n),a="id"===n?"Selamat datang dari":"Welcome from";greetingText&&(greetingText.textContent=`${r}! ${a} ${t} ${e}.`),greetingBanner&&(greetingBanner.classList.add("show"),greetingBanner.setAttribute("aria-hidden","false"),setTimeout(()=>dismissGreeting&&dismissGreeting.focus(),100))}dismissGreeting&&(dismissGreeting.addEventListener("click",dismissBanner),dismissGreeting.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),dismissBanner())})),document.addEventListener("DOMContentLoaded",async()=>{await loadGitHubProjects(),setTimeout(showGreeting,1e3);const e=document.getElementById("footerYearText");e&&(e.textContent=`¬© ${(new Date).getFullYear()} Galuh Adi Insani ‚Äî Semua hak dilindungi.`);let t=localStorage.getItem("visitCount")||0;t=parseInt(t)+1,localStorage.setItem("visitCount",t);const n=document.getElementById("visitCounter");n&&(n.textContent=t),setTimeout(()=>{statNumbers.forEach(e=>{const t=e.getBoundingClientRect();if(t.top<window.innerHeight&&t.bottom>0){const t=parseInt(e.getAttribute("data-target"));animateNumber(e,0,t,2e3),statObserver.unobserve(e)}})},500)});const sections=document.querySelectorAll("section"),sectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1});sections.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",sectionObserver.observe(e)});const musicToggle=document.getElementById("musicToggle"),backgroundMusic=document.getElementById("backgroundMusic");backgroundMusic.volume=.5,musicToggle.textContent=backgroundMusic.muted?"üéµ":"üîä",musicToggle.addEventListener("click",()=>{backgroundMusic.muted?(backgroundMusic.muted=!1,backgroundMusic.play(),musicToggle.textContent="üîä"):(backgroundMusic.muted=!0,musicToggle.textContent="üéµ")});