document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const n=e.getAttribute("href");if(n.startsWith("#")){t.preventDefault();const e=document.querySelector(n);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}})});const tBtn=document.getElementById("themeToggle");tBtn.addEventListener("click",()=>{document.body.classList.toggle("dark"),tBtn.textContent=document.body.classList.contains("dark")?"‚òÄÔ∏è":"üåô"});const menuToggle=document.getElementById("menuToggle"),primaryMenu=document.getElementById("primaryMenu");menuToggle&&menuToggle.addEventListener("click",()=>{const e="true"===menuToggle.getAttribute("aria-expanded");menuToggle.setAttribute("aria-expanded",String(!e)),primaryMenu.style.display=e?"":"flex"});const statNumbers=document.querySelectorAll(".stat-number"),statObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=parseInt(e.target.getAttribute("data-target"));animateNumber(e.target,0,t,2e3),statObserver.unobserve(e.target)}})},{threshold:.5});statNumbers.forEach(e=>statObserver.observe(e));const skillCards=document.querySelectorAll(".skill-card"),skillObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.querySelector(".skill-fill");if(t){const e=t.style.width;t.style.width="0",setTimeout(()=>t.style.width=e,100)}skillObserver.unobserve(e.target)}})},{threshold:.5});function animateNumber(e,t,n,r){const o=performance.now(),a=i=>{const s=i-o,c=Math.min(s/r,1),l=Math.floor(t+(n-t)*c);e.textContent=l,c<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}skillCards.forEach(e=>skillObserver.observe(e)),document.querySelectorAll("#primaryMenu a").forEach(e=>{e.addEventListener("click",()=>{primaryMenu&&(primaryMenu.style.display="",menuToggle&&menuToggle.setAttribute("aria-expanded","false"))})});let _cachedRepos=null,_displayCount=6;async function fetchGitHubRepos(e="adiorany3"){try{const t=await fetch(`https://api.github.com/users/${e}/repos?per_page=100&sort=pushed&direction=desc`);if(!t.ok)throw new Error("Gagal mengambil repositori");return(await t.json()).filter(e=>!e.fork)}catch(e){throw console.error("Error fetching GitHub repos:",e),e}}function formatDate(e){return new Date(e).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})}function renderProjects(e,{onlyPython:t=!0,limit:n=6}={}){const r=document.getElementById("projectsGrid");if(!r)return;let o=e.slice();if(t&&(o=o.filter(e=>"Python"===e.language)),0===o.length)return void(r.innerHTML='<p class="muted">Tidak ada repositori Python publik. Lihat <a href="https://github.com/adiorany3" target="_blank" rel="noopener">profil GitHub</a>.</p>');const a=o.slice(0,n);r.innerHTML="",a.forEach(e=>{const t=document.createElement("article");t.className="project-card";const n=e.description?e.description:"";t.innerHTML=`\n      <h3><a href="${e.html_url}" target="_blank" rel="noopener">${e.name}</a></h3>\n      <p>${n}</p>\n      <div class="project-meta">\n        <span>üõ† ${e.language||"‚Äî"}</span>\n        <span>‚≠ê ${e.stargazers_count}</span>\n        <span>‚óè ${formatDate(e.pushed_at)}</span>\n      </div>\n      <div class="project-links" style="margin-top:0.75rem">\n        <a class="btn btn-outline" href="${e.html_url}" target="_blank" rel="noopener">Repo</a>\n      </div>\n    `,r.appendChild(t)});const i=document.getElementById("loadMore");i&&(i.style.display=o.length>n?"inline-block":"none")}async function loadGitHubProjects(e="adiorany3"){const t=document.getElementById("filterPython"),n=document.getElementById("projectsGrid");if(n)try{_cachedRepos||(_cachedRepos=await fetchGitHubRepos(e));const n=_cachedRepos.filter(e=>"Python"===e.language).length,r=document.getElementById("projectsStat");if(r){const e=r.querySelector(".stat-number");e&&e.setAttribute("data-target",n)}renderProjects(_cachedRepos,{onlyPython:t&&t.checked,limit:_displayCount})}catch(t){n.innerHTML=`<p class="muted">Terjadi kesalahan saat memuat proyek. <a href="https://github.com/${e}" target="_blank" rel="noopener">Lihat GitHub</a>.</p>`,console.error(t)}}const filterEl=document.getElementById("filterPython"),loadBtn=document.getElementById("loadMore");filterEl&&filterEl.addEventListener("change",()=>{_displayCount=6,loadGitHubProjects()}),loadBtn&&loadBtn.addEventListener("click",()=>{_displayCount+=6,loadGitHubProjects()});const copyBtn=document.getElementById("copyEmail"),emailBtn=document.getElementById("emailBtn");copyBtn&&emailBtn&&(emailBtn.addEventListener("click",()=>{window.location.href="mailto:adioranye@ugm.ac.id"}),copyBtn.addEventListener("click",async()=>{const e="adioranye@ugm.ac.id";try{await navigator.clipboard.writeText(e);const t=copyBtn.textContent;copyBtn.textContent="Tersalin!",copyBtn.disabled=!0,setTimeout(()=>{copyBtn.textContent=t,copyBtn.disabled=!1},1400)}catch(t){window.prompt("Salin alamat email:",e)}}));const greetingBanner=document.getElementById("greetingBanner"),greetingText=document.getElementById("greetingText"),dismissGreeting=document.getElementById("dismissGreeting");function getBrowserName(){const e=navigator.userAgent;return e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Edg")?"Edge":e.includes("Opera")||e.includes("OPR")?"Opera":"Browser tidak dikenal"}function getDeviceType(){const e=navigator.userAgent;return/Mobi|Android/i.test(e)?"Mobile":/Tablet|iPad/i.test(e)?"Tablet":"Desktop"}function getFlagEmoji(e){return e&&"Tidak dapat mendeteksi"!==e?e.toUpperCase().replace(/./g,e=>String.fromCodePoint(e.charCodeAt(0)+127397)):""}async function getUserInfo(){try{const e=await fetch("https://api.ipify.org?format=json");if(!e.ok)throw new Error("Failed to fetch IP");const t=(await e.json()).ip,n=await fetch(`https://ipapi.co/${t}/json/`);if(!n.ok)throw new Error("Failed to fetch country");const r=await n.json(),o=r.country_name||"Tidak dapat mendeteksi",a=getFlagEmoji(r.country_code||""),i=getBrowserName();return{ip:t,country:o,flag:a,browser:i,device:getDeviceType()}}catch(e){console.error("Error fetching user info:",e);return{ip:"Tidak dapat mendeteksi",country:"Tidak dapat mendeteksi",flag:"",browser:getBrowserName(),device:getDeviceType()}}}function getGreetingMessage(){const e=(new Date).getHours();return e>=5&&e<12?"Selamat pagi":e>=12&&e<18?"Selamat siang":"Selamat malam"}function greetingDismissedToday(){return localStorage.getItem("greetingDismissDate")===(new Date).toISOString().slice(0,10)}function dismissBanner(){greetingBanner&&(greetingBanner.classList.remove("show"),greetingBanner.setAttribute("aria-hidden","true")),localStorage.setItem("greetingDismissDate",(new Date).toISOString().slice(0,10))}async function showGreeting(){if(console.log("showGreeting called"),greetingDismissedToday())return void console.log("Greeting already dismissed today");const e=getGreetingMessage();console.log("Greeting message:",e);let t="Indonesia",n="";try{const e=await getUserInfo();t=e.country||t,n=e.flag||"",console.log("User info:",e)}catch(e){console.error("Error fetching user info:",e)}greetingText?(greetingText.textContent=`${e}! Selamat datang dari ${n} ${t}.`,console.log("Greeting text set:",greetingText.textContent)):console.error("greetingText not found"),greetingBanner?(greetingBanner.classList.add("show"),greetingBanner.setAttribute("aria-hidden","false"),console.log("Greeting banner shown"),setTimeout(()=>dismissGreeting&&dismissGreeting.focus(),100)):console.error("greetingBanner not found")}dismissGreeting&&(dismissGreeting.addEventListener("click",dismissBanner),dismissGreeting.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),dismissBanner())})),document.addEventListener("DOMContentLoaded",async()=>{await loadGitHubProjects(),setTimeout(showGreeting,1e3);const e=document.getElementById("footerYearText");e&&(e.textContent=`¬© ${(new Date).getFullYear()} Galuh Adi Insani ‚Äî Semua hak dilindungi.`);let t=localStorage.getItem("visitCount")||0;t=parseInt(t)+1,localStorage.setItem("visitCount",t);const n=document.getElementById("visitCounter");n&&(n.textContent=t),setTimeout(()=>{statNumbers.forEach(e=>{const t=e.getBoundingClientRect();if(t.top<window.innerHeight&&t.bottom>0){const t=parseInt(e.getAttribute("data-target"));animateNumber(e,0,t,2e3),statObserver.unobserve(e)}})},500)});const backToTopBtn=document.getElementById("backToTop");window.addEventListener("scroll",()=>{window.scrollY>300?backToTopBtn.classList.add("show"):backToTopBtn.classList.remove("show")}),backToTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});const sections=document.querySelectorAll("section"),sectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1});sections.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",sectionObserver.observe(e)});